# numa_latency_experiment.yaml
dataset:
  name: msturing10m
  num_queries: 1000
  k: 100

trials: 3
warmup: 1
overwrite: true  # Set to true to force all indexes to rerun

indexes:
  - name: Quake_0
    index: Quake
    build_params:
      nc: 20000
      metric: l2
      num_workers: 0
      use_numa: false
    search_params:
      nprobe: 300
      batched_scan: true

  - name: Quake_1
    index: Quake
    build_params:
      nc: 20000
      metric: l2
      num_workers: 1
      use_numa: false
    search_params:
      nprobe: 300
      batched_scan: true

  - name: Quake_4
    index: Quake
    build_params:
      nc: 20000
      metric: l2
      num_workers: 4
      use_numa: false
    search_params:
      nprobe: 300
      batched_scan: true

  - name: Quake_16
    index: Quake
    build_params:
      nc: 20000
      metric: l2
      num_workers: 16
      use_numa: false
    search_params:
      nprobe: 300
      batched_scan: true

  - name: Quake_0_numa
    index: Quake
    build_params:
      nc: 20000
      metric: l2
      num_workers: 0
      use_numa: true
    search_params:
      nprobe: 300
      batched_scan: true

  - name: Quake_1_numa
    index: Quake
    build_params:
      nc: 20000
      metric: l2
      num_workers: 1
      use_numa: true
    search_params:
      nprobe: 300
      batched_scan: true

  - name: Quake_4_numa
    index: Quake
    build_params:
      nc: 20000
      metric: l2
      num_workers: 4
      use_numa: true
    search_params:
      nprobe: 300
      batched_scan: true

  - name: Quake_16_numa
    index: Quake
    build_params:
      nc: 20000
      metric: l2
      num_workers: 16
      use_numa: true
    search_params:
      nprobe: 300
      batched_scan: true

  - name: Quake_unbatched
    index: Quake
    build_params:
      nc: 20000
      metric: l2
      num_workers: 16
      use_numa: true
    search_params:
      nprobe: 300
      batched_scan: false
      search_threads: 16

#  - name: FaissIVF
#    index: IVF
#    build_params:
#      nc: 1000
#      metric: l2
#    search_params:
#      nprobe: 15
#
#  - name: SCANN
#    index: SCANN
#    build_params:
#      num_leaves: 1000
#      metric: squared_l2
#    search_params:
#      leaves_to_search: 15
#
#  - name: FaissHNSW
#    index: HNSW
#    build_params:
#      m: 64
#      ef_construction: 128
#      metric: l2
#    search_params:
#      ef_search: 24
#
#  - name: DiskANN
#    index: DiskANN
#    build_params:
#      complexity: 128
#      graph_degree: 64
#      metric: l2
#    search_params:
#      complexity: 16
#
#  - name: SVS
#    index: SVS
#    build_params:
#      graph_max_degree: 64
#      alpha: 1.1
#      window_size: 128
#      metric: l2
#    search_params:
#      search_window_size: 24

output:
  results_csv: numa_single_query_results.csv