# ─── top-level controls ───────────────────────────────────
mode: run                      # ignored by new script – kept for compatibility
overwrite:
  index:   false
  results: true

# ─── dataset ───────────────────────────────────────────────
dataset:
  name: msturing10m
  metric: l2
  path: data
  nq: 100

# ─── base index (built once) ───────────────────────────────
index:
  type: Quake
  build_params:
    nc: 160_000            # child level
    num_workers: 1
  search_params:
    k: 1

# ─── parent levels to test ─────────────────────────────────
levels:
  - nc: 0
    search_params:
      nprobes: [1, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, 4096]
      batch_size: 1
  - nc: 100                    # baseline (keep the index single-level)
    search_params:           # ← optional override for the CHILD search
      nprobes: [1, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, 4096]
      batch_size: 1
    parent_search_params:    # ← optional params passed to *parent* search
      nprobe: 10

  - nc: 500                  # 500-centroid parent layer
    search_params:
      nprobes: [1, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, 4096]
      batch_size: 1
    parent_search_params:    # ← optional params passed to *parent* search
      nprobe: 50

  - nc: 1_000
    search_params:
      nprobes: [1, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, 4096]
      batch_size: 1
    parent_search_params:    # ← optional params passed to *parent* search
      nprobe: 100

  - nc: 2_000
    search_params:
      nprobes: [ 1, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, 4096]
      batch_size: 1
    parent_search_params: # ← optional params passed to *parent* search
      nprobe: 200

  - nc: 4_000
    search_params:
      nprobes: [ 1, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, 4096]
      batch_size: 1
    parent_search_params: # ← optional params passed to *parent* search
      nprobe: 400

# ─── plotting (optional) ──────────────────────────────────
plot:
  styles:
    L0:     {color: "#1f77b4"}
    L100:   {color: "#ff7f0e"}
    L500:   {color: "#ffbb78"}
    L1000:  {color: "#2ca02c"}
    L2000:  {color: "#d62728"}